<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>WSO2 Cloud</title>
        <!-- Bootstrap -->
        <link href="../css/bootstrap-3.2.0/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/fontwso2-1.2/css/font-wso2.css">
        <link href="../css/font-awesome-4.2.0/font-awesome.min.css" rel="stylesheet">
        <link href="../css/web-fonts/Roboto.css" rel="stylesheet">
        <link href="../css/styles.css" rel="stylesheet">
        <link href="../css/select2-4.0.0/select2.min.css" rel="stylesheet">
        <link href="../css/select2-4.0.0/select2.override.css" rel="stylesheet">
       <script src="../js/jquery-1.11.1/jquery.min.js"></script>
        <script type="text/javascript" src="../serviceproviders/custom/serverinfo.jag"></script>
        <script type="text/javascript" src="../serviceproviders/custom/js/editsp.js" type="text/javascript"></script>
        <script type="text/javascript" src="../serviceproviders/custom/js/validations.js" type="text/javascript"></script>
        <script type="text/javascript" src="../serviceproviders/custom/js/jquery.validate.min.js" type="text/javascript"></script>
        <script type="text/javascript" src="../serviceproviders/custom/js/gatewayConfig.js" type="text/javascript"></script>
        <script type="text/javascript" src="../serviceproviders/custom/js/claimConfig.js" type="text/javascript"></script>
        <script type="text/javascript" src="../serviceproviders/custom/js/samlConfig.js" type="text/javascript"></script>
        <script type="text/javascript" src="../serviceproviders/custom/js/oauthConfig.js" type="text/javascript"></script>
        <script type="text/javascript" src="../serviceproviders/custom/js/constants.js" type="text/javascript"></script>
        <script type="text/javascript" src="../js/select2-4.0.0/select2.full.min.js"></script>


        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
    </head>
    <body>
        <!-- BOF cloud menu -->
        <%
require("../util/constants.jag");
var matcher = new URIMatcher(request.getRequestURI());
var applicationName;
if (matcher.match('/' + ADMIN_PORTAL_NAME + '/serviceprovider/{appname}')) {
    var arguments = matcher.elements();
    applicationName = arguments.appname;
}
include("../templates/header.jag");
%>
<input type="hidden" value="<%=applicationName%>" id="appName">
<!-- BOF App  menu -->
<div class="navbar navbar-secondary">
    <div class="container-fliud">
        <div class="row">
            <div class="side-pane-trigger">
                <i class="fa fa-reorder"></i>
            </div>
            <div class="breadcrumb-secondary">
                <i class="fw fw-security "></i> <span class="hidden-xs">Identity Cloud&nbsp;</span> / Applications / Custom Application / Edit
            </div>
        </div>
    </div>
</div>
<!-- EOF App  menu -->
<div class="inner-wrapper">
    <!-- left pane wrapper -->
    <%
include("../templates/leftpane.jag");
%>
<!-- left pane wrapper -->
<div class="right-pane">
<!-- BOF App  menu actionbar -->
<div class="action-bar">
    <a href="/<%=ADMIN_PORTAL_NAME%>/serviceproviders" class="btn-action" data-toggle="tooltip" data-placement="top"
        title="Back to Overview">
    <span class="fw-stack fw-lg btn-action-ico">
    <i class="fw fw-circle-outline fw-stack-2x"></i>
    <i class="fw fw-left-arrow fw-stack-1x"></i>
    </span> Back to Applications
    </a>
</div>
<!-- EOF App  menu actionbar-->
<div class="container-fluid cloud-container">
   <div class="row">

      <div class="col-md-5">
         <div class="form-group">
            <!--<label for="service-provider-name">Service Provider Name: </label>-->
            <input id = "spName" name="service-provider-name" type="hidden" class="form-control" placeholder="Enter service provider name" />
            <input id = "oldSPName" name="oldSPName" type="hidden" />
         </div>
         <div class="form-group">
            <!--<label for="service-provider-description" >Description: </label>-->
            <input id = "sp-description" name="service-provider-description" type="hidden" class="form-control" placeholder="Enter service provider name" />
            <!--<textarea id="sp-description" name="service-provider-description" type="hidden" class="form-control" rows="3" ></textarea>-->
            <input type="hidden" value="custom" id="spType" name="spType" />
         </div>
          <div class="row">
              <div class="col-md-12" style="padding-bottom: 20px;">
                  <img style="width: 120px;margin-top: 10px;margin-right: 10px;background-color: #525252;padding: 10px;float: left" id="sp-img"
                       src="../images/sample-app-image.png" alt="wso2" title="wso2" class="logo">
                       <div style="padding: 20px">
                         <h3 id="app-name"> Salesforce </h3>
                         <h5 > Use <span id="app-desc-name"> salesforce </span> settings to add application </h5>
                       </div>

               </div>
          </div>


          <div class="form-group">
              <!--BO Drop down for manual config and upload content-->

              <div class="btn-group" id="sso-drop-down" style="display: none;margin-bottom: 10px">
                  <a class="btn btn-default dropdown-toggle" data-toggle="dropdown" href="#">Configure Manually <span
                          class="caret"></span></a>
                  <ul class="dropdown-menu">
                      <li><a href="#" onclick="changeUC($(this),'common');">Configure Manually</a></li>
                      <li><a href="#" onclick="changeUC($(this),'common');">Upload Meta File</a></li>
                  </ul>
              </div>

              <!--EO Drop down for manual config and upload content-->

              <!--BO Dropdown for custom app config-->


              <div class="btn-group" id="custom-app-dropdown" style="display: none;">
                  <a class="btn btn-default dropdown-toggle" data-toggle="dropdown" href="#" id="app-type-dropdown">Select App Type<span
                          class="caret"></span></a>
                  <ul class="dropdown-menu">
                      <li><a id="agenttype" href="#">Agent</a></li>
                      <li><a id="proxytype" href="#">Proxy</a></li>
                      <li><a id="shortcut" href="#">Shortcut</a></li>
                  </ul>
                   <div class="app-drop-down-status" style="margin-top: 35px"></div>
                   <label id="agentUrl-error" class="error" hidden="" >This field is required.</label>
              </div>
              <!--EO Dropdown for custom app config-->


              <!--App Type Selection Panel-->
              <div id="customConfig" class="panel panel-default" hidden>
                  <div role="tabpanel" aria-labelledby="gatewayconfig-header">
                      <div class="panel-body inverse">
                          <form class="form-horizontal" role="form" id="custom-config-form" name="custom-config-form">
                              <div class="form-group">
                                  <div class="col-md-12">
                                      <label>Select App Type <span class="required">*</span> <i
                                              class="fa fa-question-circle help-tips" data-toggle="tooltip"
                                              data-placement="left"
                                              title="Who are eligible to access/view the application"></i> </label>
                                      <div class="checkbox" id="custom-apptype-content">
                                      </div>
                                  </div>
                              </div>
                          </form>
                      </div>
                  </div>
              </div>
              <!--App Type Selection Panel-->

              <!--Security Type Selection Panel-->
              <div id="security-type" class="panel panel-default" hidden>
                  <div role="tabpanel" aria-labelledby="gatewayconfig-header">
                      <div class="panel-body inverse">
                          <form class="form-horizontal" role="form">
                              <div class="form-group">
                                  <div class="col-md-12">
                                      <label>Select Security Protocol <span class="required">*</span> <i
                                              class="fa fa-question-circle help-tips" data-toggle="tooltip"
                                              data-placement="left"
                                              title="Select what type of security protocol that you want to use "></i>
                                      </label>
                                      <div class="checkbox" id="custom-security-content">


                                          <div class="btn-group" id="custom-security-dropdown">
                                              <a class="btn btn-default dropdown-toggle" data-toggle="dropdown"
                                                 href="#">Select Security Protocol <span class="caret"></span></a>
                                              <ul class="dropdown-menu">
                                                  <li><a id="SAML2WebLink" href="#">SAML2 Web SSO</a></li>
                                                  <li><a id="oAuthOPenIdLink" href="#">OAuth/OpenID Connect</a></li>
                                                  <li><a id="wsFedLink" href="#">WS-Federation (Passive)</a></li>
                                              </ul>

                                              <div class="security-drop-down-status" style="margin-top: 35px"></div>
                                              <label id="agentUrl-error" class="error" hidden="">This field is
                                                  required.</label>
                                          </div>

                                          <!--EO Dropdown for custom app config-->
                                      </div>
                                  </div>
                              </div>
                          </form>
                      </div>
                  </div>
              </div>
              <!--App Type Selection Panel-->
            <!--BOF Gateway Section-->
            <div id="gw-config-section" hidden="">
               <label for="gw-description" >Gateway Configuration </label>
               <div class="panel-group property-accordion accordion" id="gw-accordion">
                  <div class="panel panel-default">
                     <div class="panel-heading" role="tab" id="gatewayconfig-header" data-toggle="collapse" href="#gatewayconfig" aria-controls="gatewayconfig">
                        <h4 class="panel-title">
                           <a data-toggle="collapse" data-parent="#accordion" href="#gatewayconfig">
                           Gateway Configuration
                           <span class="pull-right clickable"><i class="fw fw-up"></i></span>
                           </a>
                        </h4>
                     </div>
                     <!--Make panel-collapse collapse in to keep it expanded at beginning-->
                     <div id="gatewayconfig" class="panel-collapse collapse" role="tabpanel" aria-labelledby="gatewayconfig-header" >
                        <div class="panel-body inverse">
                           <form class="form-horizontal" role="form" id="gatewayConfigForm" name="gatewayConfigForm">
                              <div class="form-group">
                                 <div class="col-md-12">
                                    <div class="checkbox" id="skipgateway-check">
                                       <label ><input type="checkbox" class="custom-checkbox custom-checkbox-white"  value="true" id="skipgateway" name="skipgateway"><span>Skip the Gateway</span></label>
                                    </div>
                                 </div>
                              </div>
                              <div id="gw-config">
                                 <div class="form-group">
                                    <div class="col-md-12">
                                       <label>Context <span class="required">*</span></label>
                                       <input type="text" class="form-control" id="gw-app-context" name="gw-app-context" >
                                    </div>
                                 </div>
                                 <div class="form-group">
                                    <div class="col-md-12">
                                       <label>URL <span class="required">*</span></label>
                                       <input type="text" class="form-control" id="gw-app-url" name="gw-app-url" >
                                    </div>
                                 </div>
                              </div>
                           </form>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <!--EOF Gateway Section-->
            <!--BOF Security Section-->


            <label for="sso-description" id="sso-config-label" hidden>SSO Configuration </label>
            <div id="dynamic-sso-config" class="panel panel-default" style="display: none;">
            </div>

            <div class="panel-group property-accordion accordion" id="security-accordion">
            <label for="service-provider-description" >Security Configuration </label>
               <div class="panel panel-default">

                  <div id="securityconfig"  role="tabpanel" aria-labelledby="securityconfig-header" >
                     <div class="panel-body">
                        <div class="panel panel-default">
                           <div class="panel-heading" role="tab" id="cladimconfig-header" data-toggle="collapse" href="#claimconfig" aria-controls="claimconfig">
                              <h4 class="panel-title">
                                 <a data-toggle="collapse" data-parent="#accordion" href="#claimconfig">
                                 Claim Configuration
                                 <span class="pull-right clickable"><i class="fw fw-up"></i></span>
                                 </a>
                              </h4>
                           </div>
                           <!--BOF Claim Config-->
                           <div id="claimconfig"   role="tabpanel" aria-labelledby="claimconfig-header" >
                              <div class="panel-body inverse">
                                 <form class="form-horizontal" role="form" id="claimConfigForm">
                                    <div class="form-group">
                                       <div class="col-md-12">
                                          <label for="claim_dialect">Select Claim mapping Dialect: </label>
                                          <div class="clearfix"></div>
                                          <label class="radio-inline">
                                          <input type="radio" name="claim_dialect" id="claim_dialect_wso2" value="local" class="custom-radio">
                                          Use Local Claim Dialect
                                          </label>
                                          <label class="radio-inline">
                                          <input type="radio" name="claim_dialect" id="claim_dialect_custom" value="custom" class="custom-radio">Define Custom Claim Dialect
                                          </label>
                                       </div>
                                    </div>
                                    <div  style="margin-bottom:10px;" id="claimsConfRow">
                                       <!--<table  class="table-borderless tabel-label">-->
                                       <div class="form-group">
                                          <div class="col-md-12">
                                             <label id="addClaimUrisLbl">Requested Claims:</label>
                                             <div class="clearfix"></div>
                                             <a id="claimMappingAddLink" class="icon-link"
                                                style="background-image: url(images/add.gif); margin-top: 0px !important; margin-bottom: 5px !important;">
                                             Add Claim URI
                                             </a>
                                          </div>
                                          <div class="col-md-12">
                                             <table class="table table-striped tabel-label" id="claimMappingAddTable">
                                                <thead>
                                                   <tr>
                                                      <th style="display: none;" id="spccol">Service Provider Claim</th>
                                                      <th>Local Claim</th>
                                                      <th style="display: none;" id="rccol">Requested Claim</th>
                                                      <th>Action</th>
                                                   </tr>
                                                </thead>
                                                <tbody id="claimMappingAddBody">
                                                   <!--implement this-->
                                                </tbody>
                                             </table>
                                          </div>
                                       </div>
                                       <div id="subjectMappingSelection">
                                           <div class="form-group">
                                              <div class="col-md-12">
                                                 <label id="subjectClaimURILbl">Subject Claim URI :</label>
                                                 <select id="subject_claim_uri" name="subject_claim_uri" class="form-control">
                                                 </select>
                                              </div>
                                           </div>
                                       </div>
                                       <input type="hidden" name="number_of_claimmappings" id="number_of_claimmappings" value="1">
                                       <div id="localClaimsList" style="display: none;">
                                          <!--render local claims onload-->
                                       </div>
                                       <input type="hidden" id ="local_calim_uris" value="" >
                                       <div id="roleMappingSelection">
                                          <div class="form-group">
                                             <div class="col-md-12">
                                                <label id="addClaimUrisLbl">Role Claim URI:</label>
                                                <select id="roleClaim" name="roleClaim" class="form-control">
                                                </select>
                                                <p style="color:black; font-weight:300;">Select Claim URI for Service Provider Role</p>
                                             </div>
                                          </div>
                                       </div>
                                    </div>
                                 </form>
                              </div>
                           </div>
                           <!--EOF Claim Config-->
                        </div>
                        <div class="panel panel-default">
                           <div class="panel-heading" role="tab" id="inbound-auth-header" data-toggle="collapse" href="#inbound-auth" aria-controls="inbound-auth">
                              <h4 class="panel-title">
                                 <a data-toggle="collapse" data-parent="#accordion" href="#inbound-auth">
                                 Inbound Authentication Configuration
                                 <span class="pull-right clickable"><i class="fw fw-up"></i></span>
                                 </a>
                              </h4>
                           </div>
                           <!--BOF Inbound Authentication Config-->
                           <div id="inbound-auth" class="panel-collapse collapse" role="tabpanel" aria-labelledby="inbound-auth-header" >
                              <div class="panel-body inverse">
                                 <div class="form-group">
                                    <div class="panel-group property-accordion accordion" id="property-accordion">
                                       <!--BOF SAML Config From Metadata-->
                                       <div class="panel panel-default" id="samlMetadataPanel">
                                          <div class="panel-heading" role="tab" id="samlmeta-header" data-toggle="collapse" href="#samlmeta" aria-controls="samlmeta">
                                             <h4 class="panel-title">
                                                <a data-toggle="collapse" data-parent="#accordion" href="#samlconfig">
                                                Upload SAML2 SSO Metdata File
                                                <span class="pull-right clickable"><i class="fw fw-up"></i></span>
                                                </a>
                                             </h4>
                                          </div>
                                          <div id="samlmeta" class="panel-collapse collapse" role="tabpanel" aria-labelledby="samlmeta-header" >
                                             <div class="panel-body inverse">
                                                <form id="addMetadata" class="form-horizontal" role="form" style="color: black;" enctype="multipart/form-data">
                                                   <div class="form-group " id="fileRow">
                                                      <div class="col-md-12">
                                                         <div hidden>
                                                            <input type="file" id="uploadfile" onchange="uploadFile(this);"/>
                                                         </div>
                                                         <!--<label for="metadataFileName">File Name<span class="required">*</span></label>-->
                                                         <label> Upload Meta File <span class="required">*</span>
                                                           <i class="fa fa-question-circle help-tips" data-toggle="tooltip" data-placement="left"
                               title="You can upload samal sso configurations from file"></i>
                                                         </label>
                                                         <div class="input-group input-wrap">

                                                            <input type="text" class="form-control" id="metadataFileName" name="metadataFileName" disabled="disabled">
                                                        <span class="input-group-btn">
                                                           <button class="btn btn-info" type="button"
                                                                   onclick="$('#uploadfile').trigger('click');return false;">Browse</button>
                                                     </span>

                                                         </div>
                                                      </div>

                                                   </div>
                                                </form>
                                             </div>
                                          </div>
                                       </div>
                                       <!--EOF SAML Config From Metadata>
                                          <!--BOF SAML Config-->
                                       <input type="hidden" value="true" id="isEditSp"/>
                                       <div class="panel panel-default" id="samlPanel">
                                          <div class="panel-heading" role="tab" id="samlconfig-header" data-toggle="collapse" href="#samlconfig" aria-controls="samlconfig">
                                             <h4 class="panel-title">
                                                <a data-toggle="collapse" data-parent="#accordion" href="#samlconfig">
                                                SAML2 Web SSO Configuration
                                                <span class="pull-right clickable"><i class="fw fw-up"></i></span>
                                                </a>
                                             </h4>
                                          </div>
                                          <div id="samlconfig" class="panel-collapse collapse" role="tabpanel" aria-labelledby="samlconfig-header" >
                                             <div class="panel-body inverse">
                                                <form id="addServiceProvider" class="form-horizontal" role="form" style="color: black;" name="addServiceProvider" hidden action="">
                                                   <!--<h4>New Service Provider</h4>-->
                                                   <input type="hidden" id="hiddenFields" name="hiddenFields" value="">
                                                   <input type="hidden" id="storeAppType" name="storeAppType" value="">
                                                   <!--Issuer-->
                                                   <div class="form-group" id="issuerRow">
                                                      <div class="col-md-12">
                                                         <label for="issuer">Issuer: <span class="required">*</span>
                                                           <i class="fa fa-question-circle help-tips" data-toggle="tooltip" data-placement="left"
                               title="Name of the issuer"></i>
                                                         </label>
                                                         <input type="text" class="form-control" id="issuer" name="issuer" placeholder="Issuer" readonly>
                                                         <input id="hiddenIssuer" type="hidden" value="" name="hiddenIssuer">
                                                      </div>
                                                   </div>
                                                   <!--ACS URL-->
                                                   <div id="acsRow">
                                                      <div class="form-group " id="assertionConsumerURLInputRow">
                                                         <div class="col-md-12">
                                                            <label for="assertionConsumerURLTxt">Assertion Consumer URLs<span class="required">*</span>
                                                             <i class="fa fa-question-circle help-tips" data-toggle="tooltip" data-placement="left"
                               title="This URL will use to do the assertion from other side"></i>
                                                            </label>
                                                            <div class="input-group input-wrap">
                                                               <input type="text" class="form-control" id="assertionConsumerURLTxt" name="assertionConsumerURLTxt">
                                                               <div class="input-group-btn">
                                                                  <button class="btn btn-info" type="button" id="addAssertionConsumerURLBtn" onclick="onClickAddACRUrl();return false;"><span>Add</span></button>
                                                               </div>
                                                            </div>
                                                         </div>
                                                      </div>
                                                      <!--ACS tabel-->
                                                      <div class="form-group" >
                                                         <div class="col-md-12">
                                                            <!--fill the tabel with acrURLS accordingly-->
                                                            <div id="assertionConsumerURLTblRow">
                                                            </div>
                                                            <input type="hidden" id="assertionConsumerURLs" name="assertionConsumerURLs" value="">
                                                            <input type="hidden" id="currentColumnId" value="0">
                                                         </div>
                                                      </div>
                                                   </div>
                                                   <!--Default Assertion Consumer Url-->
                                                   <div id="samal-dynamic-hide">
                                                   <div class="form-group" id="defaultAssertionConsumerURLRow">
                                                      <div class="col-md-12">
                                                         <label for="defaultAssertionConsumerURL" class="control-label">Default Assertion Consumer URL :<span class="required">*</span></label>
                                                         <select class="form-control" id="defaultAssertionConsumerURL" name="defaultAssertionConsumerURL">
                                                            <option value="">---Select---</option>
                                                         </select>
                                                      </div>
                                                   </div>
                                                   <!--NameID Format-->
                                                   <div class="form-group" id="nameIDRow">
                                                      <div class="col-md-12">
                                                         <label for="nameIdFormat" class="control-label">NameID format :<span class="required">*</span></label>
                                                         <input type="text" class="form-control" id="nameIdFormat" name="nameIdFormat">
                                                      </div>
                                                   </div>
                                                   <!--Certificate Alias-->
                                                   <div class="form-group" id="certificateRow">
                                                      <div class="col-md-12">
                                                         <label for="alias" class="control-label">Certificate Alias :</label>
                                                         <select class="form-control" id="alias" name="alias">
                                                            <option value="">---Select---</option>
                                                         </select>
                                                      </div>
                                                   </div>
                                                   <!--Response Signing Algorithm-->
                                                   <div class="form-group" id="signingAlgorithmRow">
                                                      <div class="col-md-12">
                                                         <label for="signingAlgorithm" class=" control-label">Response Signing Algorithm :
                                                         <span class="required">*</span>
                                                         </label>
                                                         <select class="form-control" id="signingAlgorithm" name="signingAlgorithm">
                                                            <option value="">---Select---</option>
                                                         </select>
                                                      </div>
                                                   </div>
                                                   <!--Response Digest Algorithm-->
                                                   <div class="form-group" id="digestAlgorithmRow">
                                                      <div class="col-md-12">
                                                         <label for="digestAlgorithm" class=" control-label">Response Digest Algorithm :
                                                         <span class="required">*</span>
                                                         </label>
                                                         <select class="form-control" id="digestAlgorithm" name="digestAlgorithm">
                                                            <option value="">---Select---</option>
                                                         </select>
                                                      </div>
                                                   </div>
                                                   <!--  Enable Response Signing -->
                                                   <div class="form-group" id="enableResponseSignatureRow">
                                                      <div class="col-md-12">
                                                         <div class="checkbox">
                                                            <label><input type="checkbox" class="custom-checkbox custom-checkbox-white" onclick="disableResponseSignature(this);" value="false" id="enableResponseSignature" name="enableResponseSignature"><span>Enable Response Signing</span></label>
                                                         </div>
                                                      </div>
                                                   </div>
                                                   <!--  Enable Signature Validation -->
                                                   <div class="form-group"  id="enableSigValidationRow">
                                                      <div class="col-md-12">
                                                         <div class="checkbox">
                                                            <label><input id="enableSigValidation" class="custom-checkbox custom-checkbox-white" type="checkbox" value="false" name="enableSigValidation" onclick="disableSignatureValidation(this);"><span>Enable Signature Validation in Authentication Requests and Logout Requests</span></label>
                                                         </div>
                                                      </div>
                                                   </div>
                                                   <!--  Enable Assertion Encryption -->
                                                   <div class="form-group" id="enableEncAssertionRow">
                                                      <div class="col-md-12">
                                                         <div class="checkbox">
                                                            <label><input id="enableEncAssertion" class="custom-checkbox custom-checkbox-white" type="checkbox" value="false" name="enableEncAssertion" onclick="disableEncAssertion(this);"><span>Enable Assertion Encryption</span></label>
                                                         </div>
                                                      </div>
                                                   </div>
                                                   <!--  Enable Single  Logout -->
                                                   <div id="singleLogoutRow">
                                                      <div class="form-group">
                                                         <div class="col-md-12">
                                                            <div class="checkbox">
                                                               <label><input type="checkbox" class="custom-checkbox custom-checkbox-white" onclick="disableLogoutUrl(this);" value="false" id="enableSingleLogout" name="enableSingleLogout"><span>Enable Single Logout</span></label>
                                                            </div>
                                                         </div>
                                                      </div>
                                                      <!--SLO Response URL-->
                                                      <div class="form-group">
                                                         <div class="col-md-12">
                                                            <label for="sloResponseURL" class="control-label">SLO Response URL
                                                            </label>
                                                            <input type="text" class="form-control" id="sloResponseURL" name="sloResponseURL" disabled="disabled">
                                                            <!--label id="issuer-error" class="error" for="cname" hidden>This field is required.</label-->
                                                         </div>
                                                      </div>
                                                      <!--SLO Request URL-->
                                                      <div class="form-group">
                                                         <div class="col-md-12">
                                                            <label for="sloRequestURL" class="control-label"> SLO Request URL
                                                            </label>
                                                            <input type="text" class="form-control" id="sloRequestURL" name="sloRequestURL" disabled="disabled">
                                                            <!--label id="issuer-error" class="error" for="cname" hidden>This field is required.</label-->
                                                         </div>
                                                      </div>
                                                   </div>
                                                   <!--  Enable Attribute Profile -->
                                                   <div id="attributeRow">
                                                      <div class="form-group">
                                                         <div class="col-md-12">
                                                            <div class="checkbox">
                                                               <label><input class="custom-checkbox custom-checkbox-white" id="enableAttributeProfile" type="checkbox" onclick="disableAttributeProfile(this);" name="enableAttributeProfile" value="false"><span>Enable Attribute Profile</span></label>
                                                            </div>
                                                         </div>
                                                      </div>
                                                      <!--Include Attributes in the response always-->
                                                      <div class="form-group">
                                                         <div class="col-md-12">
                                                            <input id="enableDefaultAttributeProfileHidden" type="hidden" name="enableDefaultAttributeProfileHidden"/>
                                                            <div class="checkbox">
                                                               <label><input id="enableDefaultAttributeProfile" class="custom-checkbox custom-checkbox-white" type="checkbox" onclick="disableDefaultAttributeProfile(this);" name="enableDefaultAttributeProfile" disabled="disabled"><span>Include Attributes in the Response Always</span></label>
                                                            </div>
                                                         </div>
                                                      </div>
                                                      <div class="form-group ">
                                                         <div class="col-md-12">
                                                            <label for="acsindex">Attribute Consuming Service Index</label>
                                                            <input type="text" class="form-control" id="acsindex" disabled="disabled">
                                                         </div>
                                                      </div>
                                                   </div>
                                                   <!--  Enable Audience Restriction-->
                                                   <div id="audienceRestrictionRow">
                                                      <div class="form-group">
                                                         <div class="col-md-12">
                                                            <div class="checkbox">
                                                               <label><input id="enableAudienceRestriction" class="custom-checkbox custom-checkbox-white" type="checkbox" onclick="disableAudienceRestriction(this);" value="false" name="enableAudienceRestriction"><span>Enable Audience Restriction</span></label>
                                                            </div>
                                                         </div>
                                                      </div>
                                                      <!--Audience Text-->
                                                      <div class="form-group ">
                                                         <div class="col-md-12">
                                                            <label for="audience" class=" control-label">Audience
                                                            </label>
                                                            <div class="input-group input-wrap">
                                                               <input id="audience" class="form-control" type="text" disabled="disabled" name="audience">
                                                               <div class="input-group-btn">
                                                                  <button class="btn" id="addAudience" type="button" onclick="addAudienceFunc()" value="Add" disabled="disabled" name="addAudience"><span>Add</span></button>
                                                               </div>
                                                            </div>
                                                         </div>
                                                      </div>
                                                      <!--Audience Table-->
                                                      <div class="form-group " >
                                                         <div class="col-md-12">
                                                            <!--fill the tabel with Audience URL-->
                                                            <div class="col-sm-10" style="margin-left: 10%;" id="audienceTblRow">
                                                            </div>
                                                            <input type="hidden" name="audiencePropertyCounter" id="audiencePropertyCounter" value="0"/>
                                                            <input type="hidden" id="audienceURLs" name="audienceURLs" value="">
                                                         </div>
                                                      </div>
                                                   </div>
                                                   <!--  Enable Recipient Validation-->
                                                   <div id="receipientRow">
                                                      <div class="form-group ">
                                                         <div class="col-md-12">
                                                            <div class="checkbox">
                                                               <label><input id="enableRecipients" type="checkbox" class="custom-checkbox custom-checkbox-white"  onclick="disableRecipients(this);" value="false" name="enableRecipients"><span>Enable Recipient Validation</span></label>
                                                            </div>
                                                         </div>
                                                      </div>
                                                      <!--Recipient-->
                                                      <div class="form-group">
                                                         <div class="col-md-12">
                                                            <label for="recipient" class="control-label">Recipient
                                                            </label>
                                                            <div class="input-group input-wrap">
                                                               <input id="recipient" class="form-control" type="text" disabled="disabled" name="recipient">
                                                               <div class="input-group-btn">
                                                                  <button id="addRecipient" class="btn"  type="button" onclick="addRecipientFunc()" value="Add" disabled="disabled" name="addRecipient"><span>Add</span></button>
                                                               </div>
                                                            </div>
                                                         </div>
                                                      </div>
                                                      <!--Recipient Table-->
                                                      <div class="form-group" >
                                                         <div class="col-md-12">
                                                            <!--fill the tabel with Audience URL-->
                                                            <div class="col-sm-10" style="margin-left: 10%;" id="recptTblRow">
                                                            </div>
                                                            <input type="hidden" name="recipientPropertyCounter" id="recipientPropertyCounter"  value="0"/>
                                                            <input type="hidden" name="receipientURLs" id="receipientURLs"  value="0"/>
                                                         </div>
                                                      </div>
                                                   </div>
                                                   <!--   Enable IdP Initiated SSO-->
                                                   <div class="form-group" id="idpInitSSORow">
                                                      <div class="col-md-12">
                                                         <div class="checkbox">
                                                            <label><input type="checkbox" onclick="disableIdPInitSSO(this);" class="custom-checkbox custom-checkbox-white" value="false" id ="enableIdPInitSSO" name="enableIdPInitSSO"><span>Enable IdP Initiated SSO</span></label>
                                                         </div>
                                                      </div>
                                                   </div>
                                                   <!--  Enable IdP Initiated SLO -->
                                                   <div id="idpInitSLORow">
                                                      <div class="form-group">
                                                         <div class="col-md-12">
                                                            <div class="checkbox">
                                                               <label><input type="checkbox" class="custom-checkbox custom-checkbox-white" onclick="disableIdPInitSLO(this);" value="false" id ="enableIdPInitSLO" name="enableIdPInitSLO"><span>Enable IdP Initiated SLO</span></label>
                                                            </div>
                                                         </div>
                                                      </div>
                                                      <!--IDP SLO Text-->
                                                      <div class="form-group">
                                                         <div class="col-md-12">
                                                            <label for="returnToURLTxtBox" class=" control-label">Return to URL
                                                            </label>
                                                            <div class="input-group input-wrap">
                                                               <input id="returnToURLTxtBox" class="form-control" type="text" disabled="disabled">
                                                               <div class="input-group-btn">
                                                                  <button id="addReturnToURL" class="btn" type="button" onclick="addSloReturnToURL()" value="Add" disabled="disabled"><span>Add</span></button>
                                                               </div>
                                                            </div>
                                                         </div>
                                                      </div>
                                                      <!--IDP SLO Table Table-->
                                                      <div class="form-group" >
                                                         <div class="col-md-12">
                                                            <!--fill the tabel with Audience URL-->
                                                            <div class="col-sm-10" style="margin-left: 10%;" id="idpSLOReturnToURLInputRow">
                                                            </div>
                                                            <input type="hidden" id="idpSLOURLs" name="idpSLOURLs" value="">
                                                            <input type="hidden" id="currentReturnToColumnId" value="0">
                                                         </div>
                                                      </div>
                                                   </div>
                                                   <input type="hidden" id="attributeConsumingServiceIndex" name="attributeConsumingServiceIndex"/>
                                                  </div>
                                                </form>

                                             </div>
                                          </div>
                                       </div>
                                       <!--EOF SAML Config-->
                                       <!--BOF OAuth Config-->
                                       <input type="hidden" value="true" id="isEditOauthSP"/>
                                       <div class="panel panel-default" id="oauthPanel" hidden>
                                          <div class="panel-heading" role="tab" id="oauthConfig-header" data-toggle="collapse" href="#oauthConfig" aria-controls="oauthConfig">
                                             <h4 class="panel-title">
                                                <a data-toggle="collapse" data-parent="#accordion" href="#oauthConfig">
                                                OAuth/OpenID Connect Configuration
                                                <span class="pull-right clickable"><i class="fw fw-up"></i></span>
                                                </a>
                                             </h4>
                                          </div>
                                          <div id="oauthConfig" class="panel-collapse collapse" role="tabpanel" aria-labelledby="oauthConfig-header" >
                                             <div class="panel-body inverse">
                                                <form id="oauthAttrIndexForm" class="form-horizontal" style="color: black;" role="form" hidden>
                                                   <div class="form-group">
                                                      <div class="col-md-12">
                                                         <label for="consumerID">OAuth Client Key<span class="required">*</span></label>
                                                         <input type="text" class="form-control" id="consumerID" disabled="disabled">
                                                      </div>
                                                   </div>
                                                   <div class="form-group">
                                                      <div class="col-md-12">
                                                         <label for="consumerSecret">OAuth Client Secret</label>
                                                         <div class="input-group input-wrap">
                                                            <input type="password" class="form-control" id="consumerSecret" disabled="disabled">
                                                            <div class="input-group-btn">
                                                               <button class="btn" type="button" id="showSecret" onclick="showHidePassword(this, 'consumerSecret')" name="showSecret"><span id="secretSpan">Show</span></button>
                                                            </div>
                                                         </div>
                                                      </div>
                                                   </div>
                                                   <div class="form-group">
                                                      <div class="col-md-12">
                                                         <button class="cu-btn cu-btn-sm cu-btn-blue cu-btn-position"  onclick="showOauthForm();return false;">
                                                         <span class="fw-stack btn-action-ico">
                                                         <i class="fw fw-circle-outline fw-stack-2x"></i>
                                                         <i class="fw fw-edit fw-stack-1x"></i>
                                                         </span>
                                                         Edit
                                                         </button>
                                                         <button class="cu-btn cu-btn-sm cu-btn-blue cu-btn-position" onclick="deleteOauthConfig();return false;">
                                                         <span class="fw-stack btn-action-ico">
                                                         <i class="fw fw-circle-outline fw-stack-2x"></i>
                                                         <i class="fw fw-delete fw-stack-1x"></i>
                                                         </span>
                                                         Delete
                                                         </button>
                                                      </div>
                                                   </div>
                                                </form>
                                                <div class="form-group" id = "oauthConfigBtn" hidden>
                                                   <div class="col-md-12">
                                                      <button class="cu-btn cu-btn-sm cu-btn-blue cu-btn-position" onclick="showOauthForm();return false;">
                                                      <span class="fw-stack btn-action-ico">
                                                      <i class="fw fw-circle-outline fw-stack-2x"></i>
                                                      <i class="fw fw-edit fw-stack-1x"></i>
                                                      </span>
                                                      Configure
                                                      </button>
                                                   </div>
                                                </div>
                                                <form id="addAppForm" name="addAppForm" class="form-horizontal" role="form" style="color: black; display: block;" hidden>
                                                   <!--<h4>Register New Application</h4>-->
                                                   <!--<h5 style="margin-top: 15px;"> New Application</h5>-->
                                                   <!--Hidden fields-->
                                                   <div id="oauthHiddenFields" hidden>
                                                   </div>
                                                   <!--OAuth Version-->
                                                   <div class="form-group" style="display: block;">
                                                      <div class="col-md-12" id="versionRow">
                                                      </div>
                                                   </div>
                                                   <!--Application Name Hidden Field-->
                                                   <div class="form-group col-md-12" id="appnamehid" hidden>
                                                      <label for="application">Application Name
                                                      </label>
                                                      <input type="text" class="form-control" id="application" name="application">
                                                   </div>
                                                   <!--Callback Url-->
                                                   <div class="form-group" id="callback_row" style="display: block;" hidden>
                                                      <div class="col-md-12">
                                                         <label for="callback">Callback Url
                                                         <span class="required">*</span>
                                                         </label>
                                                         <input type="text" class="form-control" id="callback" name="callback">
                                                      </div>
                                                   </div>
                                                   <!--Grant Types-->
                                                   <div class="form-group" style="display: block;" hidden>
                                                      <div class="col-md-12" id="grant_row" name="grant_row">
                                                         <!--Filled in oauthConfig.js-->
                                                      </div>
                                                   </div>
                                                   <!--PKCE Mandatory-->
                                                   <div class="form-group" id="pkce_enable" style="display: block;" hidden>
                                                      <div class="col-md-12">
                                                         <label for="pkce" >PKCE Mandatory
                                                         </label>
                                                         <div class="checkbox">
                                                            <label>
                                                            <input class="custom-checkbox custom-checkbox-white" type="checkbox" value="mandatory" name="pkce" id="pkce">
                                                            <span>Mandatory</span>
                                                            </label>
                                                         </div>
                                                         <span> Only allow applications that bear PKCE Code Challenge with them. </span>
                                                      </div>
                                                   </div>
                                                   <!--PKCE Support plain-->
                                                   <div class="form-group" id="pkce_support_plain" style="display: block;" hidden>
                                                      <div class="col-md-12">
                                                         <label for="grantTypes" >Support PKCE 'Plain' Transform Algorithm
                                                         </label>
                                                         <div class="checkbox">
                                                            <label><input class="custom-checkbox custom-checkbox-white" type="checkbox" checked="" value="yes" id="pkce_plain" name="pkce_plain"><span>Yes</span></label>
                                                         </div>
                                                         <span> Server supports 'S256' PKCE tranformation algorithm by default. </span>
                                                      </div>
                                                   </div>
                                                   <!--Buttons-->
                                                   <div class="form-group">
                                                      <div class="col-md-12">
                                                         <button class="cu-btn cu-btn-sm cu-btn-blue cu-btn-position" id="oauthRgsterBtn" onclick="onClickAdd();return false;">
                                                         <span class="fw-stack btn-action-ico">
                                                         <i class="fw fw-circle-outline fw-stack-2x"></i>
                                                         <i class="fw fw-save fw-stack-1x"></i>
                                                         </span>
                                                         Add
                                                         </button>
                                                         <button class="cu-btn cu-btn-sm cu-btn-blue cu-btn-position" id="oauthUpdtBtn" onclick="onClickUpdate();return false;">
                                                         <span class="fw-stack btn-action-ico">
                                                         <i class="fw fw-circle-outline fw-stack-2x"></i>
                                                         <i class="fw fw-save fw-stack-1x"></i>
                                                         </span>
                                                         Update
                                                         </button>
                                                         <button class="cu-btn cu-btn-sm cu-btn-blue cu-btn-position" onclick="cancelOauthForm();return false;">
                                                         <span class="fw-stack btn-action-ico">
                                                         <i class="fw fw-circle-outline fw-stack-2x"></i>
                                                         <i class="fw fw-delete fw-stack-1x"></i>
                                                         </span>
                                                         Cancel
                                                         </button>
                                                      </div>
                                                   </div>
                                                </form>
                                             </div>
                                          </div>
                                       </div>
                                       <!--EOF OAuth Config-->
                                       <!--BOF WS-Federation Config-->
                                       <div class="panel panel-default" id="wsfedPanel" hidden>
                                          <div class="panel-heading" role="tab" id="wsfed-header" data-toggle="collapse" href="#wsfed" aria-controls="wsfed">
                                             <h4 class="panel-title">
                                                <a data-toggle="collapse" data-parent="#accordion" href="#wsfed">
                                                WS-Federation (Passive) Configuration
                                                <span class="pull-right clickable"><i class="fw fw-up"></i></span>
                                                </a>
                                             </h4>
                                          </div>
                                          <div id="wsfed" class="panel-collapse collapse" role="tabpanel" aria-labelledby="wsfed-header" >
                                             <div class="panel-body inverse">
                                                <form class="form-horizontal" role="form">
                                                   <div class="form-group">
                                                      <div class="col-md-12">
                                                         <label for="passiveSTSRealm"> Passive STS Realm :</label>
                                                         <input type="text" class="form-control" id="passiveSTSRealm">
                                                      </div>
                                                   </div>
                                                   <div class="form-group">
                                                      <div class="col-md-12">
                                                         <label for="passiveSTSWReply">Passive STS WReply URL : </label>
                                                         <input type="text" class="form-control" id="passiveSTSWReply">
                                                      </div>
                                                   </div>
                                                </form>
                                             </div>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           <!--EOF Inbound Authentication Config-->
                        </div>
                     </div>
                  </div>
               </div>
            </div>

            <!--EOF Security Section-->
            <!--BOF Store Config-->
            <div id="store-config-section">
               <label for="store-description" >Store Configuration </label>
               <div class="panel-group property-accordion accordion" id="store-accordion">
                  <div class="panel panel-default">
                     <div class="panel-heading" role="tab" id="storeconfig-header" data-toggle="collapse" href="#storeconfig" aria-controls="gatewayconfig">
                        <h4 class="panel-title">
                           <a data-toggle="collapse" data-parent="#accordion" href="#storeconfig">
                           Store Configuration
                           <span class="pull-right clickable" id="span-head-security" ><i class="fw fw-up" id="up-icon"></i></span>
                           </a>
                        </h4>
                     </div>
                     <!--Make panel-collapse collapse in to keep it expanded at beginning-->
                     <div id="storeconfig" class="panel-collapse collapse" role="tabpanel" aria-labelledby="storeconfig-header" >
                        <div class="panel-body inverse">
                           <form class="form-horizontal" role="form" id="storeConfigForm" name="storeConfigForm">
                              <div id="gw-config">
                                 <div class="form-group">
                                    <div class="col-md-12">
                                       <label>Display Name <span class="required">*</span></label>
                                       <input type="text" class="form-control" id="store-app-name" name="store-app-name" >
                                       <input type="hidden" class="form-control" id="app-id" name="app-id" >
                                    </div>
                                 </div>
                                 <div class="form-group" id="store-app-url-sec">
                                    <div class="col-md-12">
                                       <label>Access URL <span class="required">*</span></label>
                                       <input type="text" class="form-control" id="store-app-url" name="store-app-url" >
                                    </div>
                                 </div>
                                 <div class="form-group">
                                    <div class="col-md-12">
                                       <label>Tags</label>
                                       <input type="text" class="form-control" id="store-app-tags" name="store-app-tags" >
                                    </div>
                                 </div>
                                 <div class="form-group">
                                    <div class="col-md-12">
                                       <label>Visibility <i class="fa fa-question-circle help-tips" data-toggle="tooltip" data-placement="left"
                               title="Who are eligible to access/view the application"></i> </label>
                                       <input type="text" class="form-control" id="store-app-visibility" name="store-app-visibility" >
                                    </div>
                                 </div>
                                      <div class="form-group" id="sso-thumb">
                                    <div class="col-md-12">
                                        <label>App Icon</label>
                                        <div class="row"> </div>
                                        <div id="thumb-img-ele"></div>
                                        <img style="width: 60px;margin-top: 10px;background-color: #525252;" id="sp-img-thumb" src="../images/is/custom.png" alt="thumbnail image" title="wso2" class="logo">
                                        <span class="btn btn-default btn-file"> Upload an image
                                        <input type="file" class="form-control" id="store-app-thumbnail" name="store-app-thumbnail" accept="image/gif, image/jpeg, image/png, image/jpg" >
                                        </span>
                                        </br>
                                        <span>Upload a thumbnail image to show in the store details page</span>
                                        <input type="hidden" class="form-control" id="store-app-thumbnail-url" name="store-app-thumbnail-url" >
                                    </div>
                                  </div>
                                  <div class="form-group" id="sso-banner">
                                    <div class="col-md-12">
                                        <label>Banner</label>
                                         <div class="row"> </div>
                                         <div id="banner-img-ele"></div>
                                        <img style="width: 100%;height:70px;margin-top: 10px;background-color: #525252;" id="sp-img-banner"   alt="banner image" title="wso2" class="logo">
                                         <div class="row"> </div>

                                        <span class="btn btn-default btn-file" style="margin-top: 5px"> Upload an image
                                        <input type="file" class="form-control" id="store-app-banner" name="store-app-banner" accept="image/gif, image/jpeg, image/png, image/jpg" >
                                        </span>
                                         <span>Upload a banner image to show in the store details page</span>
                                        <input type="hidden" class="form-control" id="store-app-banner-url" name="store-app-banner-url" >
                                    </div>
                                  </div>
                              </div>
                           </form>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <!--EOF Store Config-->
            <div class="form-group" style="margin-top: -60px;margin-bottom: 50px" id="btn-main-update">
                                       <div class="connectionStatus"></div>
                                        <label id="agentUrl-error" class="error" hidden="" >This field is required.</label>
               <button class="cu-btn cu-btn-sm cu-btn-blue cu-btn-position" onclick="validateInputs();" >
               <span class="fw-stack btn-action-ico">
               <i class="fw fw-circle-outline fw-stack-2x"></i>
               <i class="fw fw-save fw-stack-1x"></i>
               </span>
               Update
               </button>
            </div>

            </div>
         </div>
      </div>
   </div>
   <!--row-->
</div>
    <!-- BOF add loading overlay -->
    <div id="img-loader" class="loading-overlay">
        <div class="loader">
            <div class="row-centered" id="progress-icon">
                <div class="app-listing-loader">
                    <div class="loading-logo">
                        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="3em"
                    xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                    viewBox="0 0 14 14" enable-background="new 0 0 14 14" xml:space="preserve">
                        <path class="circle" stroke-width="1.4" stroke-miterlimit="10" d="M6.534,
                        0.748C7.546,0.683,8.578,0.836,9.508,1.25 c1.903,0.807,3.339,2.615,3.685,4.654c0.244,
                        1.363,0.028,2.807-0.624,4.031c-0.851,1.635-2.458,2.852-4.266,3.222 c-1.189,0.25-2.45,
                        0.152-3.583-0.289c-1.095-0.423-2.066-1.16-2.765-2.101C1.213,9.78,0.774,8.568,0.718,
                        7.335 C0.634,5.866,1.094,4.372,1.993,3.207C3.064,1.788,4.76,0.867,6.534,0.748z"/>
                        <path class="pulse-line" stroke-width="0.55" stroke-miterlimit="10" d="M12.602,
                        7.006c-0.582-0.001-1.368-0.001-1.95,0 c-0.491,0.883-0.782,1.4-1.278,2.28C8.572,
                        7.347,7.755,5.337,6.951,3.399c-0.586,1.29-1.338,3.017-1.923,
                        4.307 c-1.235,0-2.38-0.002-3.615,0"/>
                    </svg>
                        <div class="signal"></div>
                        <p>Loading..</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- EOF add loading overlay --

<!-- /.container -->
<div id="push"></div>
</div>

<div id="tempStore">

</div>

</div>
<!--Inner Wrapper-->
<%
include("/templates/footer.jag");
%>
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="../js/bootstrap-3.2.0/bootstrap.min.js"></script>
<!-- include custom js functions -->
<script src="../js/custom/custom.js"></script>
<script src="../js/custom/jquery.validate.min.js"></script>
<script src="../js/custom/constants.js"></script>
<script>
$('.side-pane-trigger').click(function(){
    var rightPane = $('.right-pane');
    var leftPane = $('.left-pane');
    if (rightPane.hasClass('visible')){
        rightPane.animate({"left":"0em"}, "slow").removeClass('visible');
        leftPane.animate({"left":"-18em"}, "slow");
        $(this).find('i').removeClass('fa-arrow-left').addClass('fa-reorder');
    } else {
        rightPane.animate({"left":"18em"}, "slow").addClass('visible');
        leftPane.animate({"left":"0em"}, "slow");
        $(this).find('i').removeClass('fa-reorder').addClass('fa-arrow-left');
    }
});

$("#sso-drop-down .dropdown-menu li a").click(function () {
    var selText = $(this).text();
    $(this).parents('.btn-group').find('.dropdown-toggle').html(selText + ' <span class="caret"></span>');

});


function changeUC(obj, param) {
    if (param === 'custom') {

        var selText = obj.context.innerText;
        switch (selText) {
            case 'Upload Meta File':

                if ($("#custom-security-content").find("#fileRow").length == 0) {
                    var uploadContent = $("#fileRow").clone();
                    $("#custom-sso-drop-down").after("<div class='row' style='padding: 10px;' id='dynamic-csdd'> </div>");
                    uploadContent.insertAfter("#dynamic-csdd");
                    $("#samlconfig").hide();
                }

                break;
            case 'Configure Manually':
                $("#fileRow").remove();
                $("#dynamic-csdd").remove();
                $("#samlconfig").show();
                break;
            default:
        }

    } else {

        var selText = obj.context.innerText;
        switch (selText) {
            case 'Upload Meta File':
                if ($("#dynamic-sso-config").find("#fileRow").length == 0) {
                    var uploadContent = $("#fileRow").clone();
                    uploadContent.insertAfter("#sso-drop-down");
                }
                $("#dynamic-sso-config #issuerRow").hide();
                $("#dynamic-sso-config #acsRow").hide();
                break;
            case 'Configure Manually':
                $("#dynamic-sso-config #fileRow").remove();
                $("#dynamic-sso-config #issuerRow").show();
                $("#dynamic-sso-config #acsRow").show();
                break;
            default:
        }

    }
}


$("#custom-app-dropdown .dropdown-menu li a").click(function () {

    var selText = $(this).text();
    $(this).parents('.btn-group').find('.dropdown-toggle').html(selText + ' <span class="caret"></span>');

    switch (selText) {
        case 'Agent':
            $("#skipgateway").prop('checked', true);
            $("#gw-config-section").hide();
            $("#security-type").show();
            $("#security-accordion").hide();
            break;
        case 'Proxy':
            $("#skipgateway").prop('checked', false);
            $("#skipgateway-check").hide();

            $("#security-type").hide();
            $("#gw-config-section").show();
            $("#gatewayconfig").attr('class', '');
            $("#gw-config-section").find('.panel-heading').remove();

            $("#gatewayConfigForm").validate(); //sets up the validator since dynamically added elements here
            $("input[id*=gw-app-context]").rules("add", "required");
            $("input[id*=gw-app-url]").rules("add", "required");
            $("input[id*=gw-app-url]").rules("add", "url");

            //show claim config
            $("#subjectMappingSelection").hide();
            $('#subject_claim_uri').val('')
            $("#security-accordion").show();
            $("#cladimconfig-header").remove();
            $("#inbound-auth-header").hide();
            break;
        case 'Shortcut' :
            $("#skipgateway").prop('checked', false);
            $("#security-type").hide();
            $("#security-accordion").hide();
            $("#gw-config-section").hide();
            break;
        default:
    }
});

var samlconf, oauthconf, wsfedconf = null;

$("#custom-security-content .dropdown-menu li a").click(function () {
    var selText = $(this).text();
    $(this).parents('.btn-group').find('.dropdown-toggle').html(selText + ' <span class="caret"></span>');

    switch (selText) {
        case 'SAML2 Web SSO':
            $("#custom-security-dropdown").nextAll().remove();
            $("#security-type").find("#oauthConfig").remove();
            reAppend("oauthConfig", oauthconf);
            $("#security-type").find("#wsfed").remove();
            reAppend("wsfed", wsfedconf);

            var dropdown = $("#sso-drop-down").clone();
            dropdown.attr('style', '').show().attr('id', 'custom-sso-drop-down');
            dropdown.find('a').attr('onclick', 'changeUC($(this),"custom")');
            $("#custom-security-dropdown").after("<div class='row' style='padding: 10px;' id='dynamic-sdd'> </div>");
            $("#dynamic-sdd").after(dropdown);


            if (!samlconf) {
                samlconf = $("#samlconfig").clone();
            }
            $("#samlconfig").remove();
            samlconf.removeClass("panel-collapse collapse");
            $("#security-type").append(samlconf).show();

            break;
        case 'OAuth/OpenID Connect':
            $("#custom-security-dropdown").nextAll().remove();
            // remove already added
            $("#security-type").find("#wsfed").remove();
            reAppend("wsfed", wsfedconf);
            $("#security-type").find("#samlconfig").remove();
            reAppend("samlconfig", samlconf);

            if (!oauthconf) {
                oauthconf = $("#oauthConfig").clone();
            }
            $("#oauthConfig").remove();
            oauthconf.removeClass("panel-collapse collapse");
            $("#security-type").append(oauthconf).show();
            break;
        case 'WS-Federation (Passive)' :
            $("#custom-security-dropdown").nextAll().remove();
            $("#security-type").find("#oauthConfig").remove();
            reAppend("oauthConfig", oauthconf);
            $("#security-type").find("#samlconfig").remove();
            reAppend("samlconfig", samlconf);

            if (!wsfedconf) {
                wsfedconf = $("#wsfed").clone();
            }
            $("#wsfed").remove();
            wsfedconf.removeClass("panel-collapse collapse");
            $("#security-type").append(wsfedconf).show();

            break;
        default:
    }
});

$(document).ready(function () {
    var intervalVar = setInterval(function () {
        $("#img-loader").hide();
        clearTimeout(intervalVar);
    }, 600);
});


$("#store-app-thumbnail").change(function (e) {
    for (var i = 0; i < e.originalEvent.srcElement.files.length; i++) {
        var file = e.originalEvent.srcElement.files[i];
        var img = document.createElement("img");
        var ele = $('<img/>');
        var reader = new FileReader();
        reader.onloadend = function () {
            ele.attr('src', reader.result);
            ele.attr('style', 'width: 60px;margin-top: 10px;background-color: #525252;');
            ele.attr('id', 'dynamic-upld-imgt');
        };
        reader.readAsDataURL(file);
        $("#dynamic-upld-imgt").remove();
        $("#thumb-img-ele").after(ele);
        $("#banner-img").remove();
        $("#sp-img-thumb").remove();
    }
});


$("#store-app-banner").change(function (e) {
    for (var i = 0; i < e.originalEvent.srcElement.files.length; i++) {
        var file = e.originalEvent.srcElement.files[i];
        var img = document.createElement("img");
        var ele = $('<img/>');
        var reader = new FileReader();
        reader.onloadend = function () {
            ele.attr('src', reader.result);
            ele.attr('style', 'width: 100%;height:70px;margin-top: 10px;background-color: #525252;');
            ele.attr('id', 'dynamic-upld-imgb');

        };
        reader.readAsDataURL(file);
        $("#dynamic-upld-imgb").remove();
        $("#banner-img-ele").after(ele);
        $("#banner-img").remove();
        $("#sp-img-banner").remove();
    }
});


function reAppend(source, object) {
    var elements = $("#security-type").find("#" + source);
    if (elements && elements.length === 1) {
        $("#tempStore").append(object);
    }
}

</script>
<script>
var cookie = null;
var json = null;
var userName = null;
var userInfo = null;
//var serverUrl = window.location.host + PROXY_CONTEXT_PATH;
var serverUrl = window.location.host;
var appName = $('#appName').attr('value');
    $(function WindowLoad(event) {
        url = 'wss://' + serverUrl + '/' + ADMIN_PORTAL_NAME + '/session_manager.jag';
        ws = new WebSocket(url);

        ws.onopen = function () {
            console.log("web Socket onopen. ");
            ws.send("First Message open");
        };
        ws.onmessage = function (event) {
            var obj = $.parseJSON(event.data);
            cookie = obj.cookie;
            userName = obj.user;
            userInfo = obj.userInfo;
            preDrawUpdatePage(appName);
            console.log("preDrawUpdatePage invoked. ");
        };
        ws.onclose = function () {
            console.log("web Socket onclose. ");
        };
    });
</script>
</body>
</html>